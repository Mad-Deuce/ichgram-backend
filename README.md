#### Node.js & type script: Домашнее задание 14 (evening)

Домашняя работа 14

Задание 1

Создание и настройка проекта

1. Инициализация нового проекта

Откройте терминал и перейдите в папку, где вы хотите создать проект.

Введите команду \`npm init -y\`, чтобы создать файл \`package.json\` с настройками вашего проекта.

2. Установка необходимых зависимостей

Установите Express, Mongoose, dotenv

3. Создание файла \`app.js\` для запуска Express-сервера

Создайте в корневой папке проекта файл с именем \`app.js\`.

В этом файле настройте ваш Express-сервер.

Вам нужно создать основной сервер Express и настроить его на прослушивание порта 3000.

4. Настройка подключения к базе данных MongoDB

Создайте файл \`.env\` в корневой папке вашего проекта. Этот файл будет использоваться для хранения конфиденциальных данных, таких как URL для подключения к MongoDB.

Внутри файла \`.env\` добавьте строку с переменной, которая будет хранить URL вашей базы данных MongoDB.

В файле \`app.js\` используйте библиотеку \`dotenv\`, чтобы загрузить переменные окружения из файла \`.env\`. Это позволит вашему приложению подключаться к базе данных, используя защищенный URL.

Настройте Mongoose для подключения к MongoDB с использованием переменной из файла \`.env\`. Убедитесь, что вы добавили код для обработки ошибок подключения.

5. Запуск сервера и проверка подключения

Убедитесь, что сервер успешно запущен и подключение к базе данных установлено. Если вы видите сообщения об успешном подключении в терминале, значит все настроено правильно.

Задание 2

Создание двух моделей и настройка связи один ко многим

1. Создание модели Category

В папке \`models\` создайте файл \`Category.js\`.

Определите схему для категории (Category) с полем \`name\` (строка, обязательное поле).

Создайте модель на основе схемы и экспортируйте её.

2. Создание модели Product

В папке \`models\` создайте файл \`Product.js\`.

Определите схему для продукта (Product) с полями \`name\` (строка, обязательное поле), \`price\` (число, обязательное поле), и \`category\` (ссылка на модель \`Category\`, используя \`type: mongoose.Schema.Types.ObjectId\` и \`ref: 'Category'\`).

Создайте модель на основе схемы и экспортируйте её.

Задание 3

Добавление документов в коллекции и использование populate

1. Добавление категорий

В файле \`app.js\` создайте маршрут \`POST /categories\`, который будет добавлять новые категории в базу данных, используя модель \`Category\`.

Добавьте пару категорий, например, "Electronics" и "Books".

2. Добавление продуктов

Создайте маршрут \`POST /products\`, который будет добавлять новые продукты в базу данных, используя модель \`Product\`. При добавлении продукта укажите \`category\` как ObjectId одной из созданных категорий.

Добавьте пару продуктов, например, телефон (в категорию "Electronics") и книгу (в категорию "Books").

3. Использование populate

Создайте маршрут \`GET /products\`, который будет возвращать список всех продуктов с популированными данными о категориях, используя метод \`populate('category')\`.

Проверьте, что запрос возвращает продукты с полной информацией о связанных категориях.

Домашняя работа 13

Задание 1

Инициализация проекта, настройка подключения к базе данных MongoDB

1. Инициализация нового проекта

Инициализируйте новый проект в удобной вам директории.

Установите необходимые зависимости: express, dotenv.

Подготовьте структуру файлов и папок.

Настройте простой Express сервер.

2. Установка Mongoose

Запустите терминал или командную строку в корневой папке вашего проекта Express.

В терминале введите следующую команду для установки Mongoose:

npm install mongoose

3. Подключение Mongoose к вашему проекту

Откройте файл, в котором настроен ваш Express сервер.

В верхней части файла, где вы импортируете необходимые модули, добавьте код для подключения Mongoose.

4. Настройка подключения к MongoDB

Определите строку подключения к вашей базе данных MongoDB.

5. Управление подключением

Настройте Mongoose для обработки подключения к базе данных. Убедитесь, что вы добавили обработку успешного подключения и возможных ошибок.

6. Тестирование подключения

Вновь откройте терминал в корне вашего проекта и запустите Express сервер.

Если подключение к базе данных настроено правильно, вы увидите сообщение о успешном подключении к MongoDB в консоли.

Задание 2

Создать связь "один ко многим" между моделями \`Publisher\` и \`Magazine\`.

1. Определение модели издателя

Создайте новую схему \`Publisher\`, которая будет содержать поля, такие как \`name\` (название издателя) и \`location\` (местоположение издателя).

Создайте модель \`Publisher\`, используя схему \`Publisher\`.

2. Определение модели журнала

Создайте новую схему \`Magazine\`, которая будет содержать поля, такие как \`title\` (название журнала) и \`issueNumber\` (номер выпуска).

Добавьте поле \`publisher\`, которое будет содержать ссылку на модель \`Publisher\`, к которой относится журнал.

Создайте модель \`Magazine\`, используя схему \`Magazine\`.

3. Экспорт и использование моделей

Убедитесь, что обе модели экспортированы и доступны для использования в других частях приложения.

Задание 3

Создать связь "многие ко многим" между моделями \`Tag\` и \`Article\`

1. Определение модели тега

Создайте новую схему \`Tag\`, которая будет содержать поле \`name\` (название тега).

Добавьте поле \`articles\`, которое будет массивом ссылок на статьи (\`Article\`).

Создайте модель \`Tag\`, используя схему \`Tag\`.

2. Определение модели статьи

Создайте новую схему \`Article\`, которая будет содержать поля, такие как \`title\` (заголовок статьи) и \`content\` (содержимое статьи).

Добавьте поле \`tags\`, которое будет массивом ссылок на теги (\`Tag\`).

Создайте модель \`Article\`, используя схему \`Article\`.

3. Экспорт и использование моделей

Убедитесь, что обе модели экспортированы и доступны для использования в других частях приложения.
